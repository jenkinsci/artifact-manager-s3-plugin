<?xml version='1.1' encoding='UTF-8'?>
<flow-definition plugin="workflow-job@2.21">
  <actions>
    <org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobAction plugin="pipeline-model-definition@1.2.9"/>
    <org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobPropertyTrackerAction plugin="pipeline-model-definition@1.2.9">
      <jobProperties/>
      <triggers/>
      <parameters/>
    </org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobPropertyTrackerAction>
    <org.jenkinsci.plugins.workflow.multibranch.JobPropertyTrackerAction plugin="workflow-multibranch@2.19">
      <jobPropertyDescriptors>
        <string>org.jenkinsci.plugins.workflow.job.properties.PipelineTriggersJobProperty</string>
        <string>jenkins.model.BuildDiscarderProperty</string>
      </jobPropertyDescriptors>
    </org.jenkinsci.plugins.workflow.multibranch.JobPropertyTrackerAction>
  </actions>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <jenkins.model.BuildDiscarderProperty>
      <strategy class="hudson.tasks.LogRotator">
        <daysToKeep>-1</daysToKeep>
        <numToKeep>10</numToKeep>
        <artifactDaysToKeep>-1</artifactDaysToKeep>
        <artifactNumToKeep>2</artifactNumToKeep>
      </strategy>
    </jenkins.model.BuildDiscarderProperty>
    <org.jenkinsci.plugins.workflow.job.properties.PipelineTriggersJobProperty>
      <triggers/>
    </org.jenkinsci.plugins.workflow.job.properties.PipelineTriggersJobProperty>
  </properties>
  <definition class="org.jenkinsci.plugins.workflow.cps.CpsFlowDefinition" plugin="workflow-cps@2.54-rc730.05bb1322341d">
    <script>def name = &quot;test-s3-small-files&quot;
def t1,t2,t3,t4

timestamps {
    node() {
      stage(&apos;Setup&apos;) {
        for(def i = 1; i &lt; 100; i++) {
          writeFile file: &quot;test/test-${i}.txt&quot;, text: &quot;test ${i}&quot;
        }
      }
      stage(&apos;Archive&apos;) {
        t1 = System.currentTimeMillis()
        archiveArtifacts &quot;test/*&quot;
        t2 = System.currentTimeMillis()
      }
      stage(&apos;Unarchive&apos;) {
        dir(&apos;unarch&apos;) {
          deleteDir()
          t3 = System.currentTimeMillis()
          unarchive mapping: [&quot;test/&quot;: &apos;.&apos;]
          t4 = System.currentTimeMillis()
        }
      }
/*
      sh &quot;rm -fr test || echo true&quot;

      def content = &quot;&quot;
      try{
        copyArtifacts(projectName: &quot;${env.JOB_NAME}&quot; , selector: specific(&quot;${currentBuild.number - 1}&quot;))
        content = readFile file: &apos;gnuplot.csv&apos;
      } catch (err){
        echo &quot;There is no gnuplot.csv to unarchive&quot;
        content = &quot;time,archive,unarchive&quot;
      }

      java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat(&quot;yyyy/M/dd HH:mm:ss&quot;)
      String date = sdf.format(new Date())
      writeFile file: &apos;gnuplot.csv&apos;, text: &quot;${content}\n${date},${t2 - t1},${t4 - t3}&quot;
      archiveArtifacts &apos;gnuplot.csv&apos;
      */
    }
}</script>
    <sandbox>true</sandbox>
  </definition>
  <triggers/>
  <disabled>false</disabled>
</flow-definition>