apiVersion: v1
kind: Pod
metadata:
  annotations:
    iam.amazonaws.com/role: <IAM_ROLE>
  generateName: <NAME>-
  labels:
    name: jnlp
    label: jnlp
spec:
  securityContext:
    runAsUser: 1000
  containers:
  - name: jnlp
    image: docker.io/jenkins/jnlp-slave
    tty: true
    securityContext:
      runAsUser: 1000
      allowPrivilegeEscalation: false
  - name: <NAME>
    image: <DOCKER_IMAGE>
    tty: true
    env:
      - name: JAVA_OPTS
        value: -Djava.awt.headless=true
      - name: S3_REGION
        value: <S3_REGION>
      - name: S3_CONTAINER
        value: <S3_CONTAINER>
      - name: S3_PREFIX
        value: <S3_PREFIX>
    securityContext:
      runAsUser: 1000
      allowPrivilegeEscalation: false
  imagePullSecrets:
    - name: <DOCKER_SECRET>
