apiVersion: v1
kind: Pod
metadata:
  annotations:
    iam.amazonaws.com/role: <IAM_ROLE>
  generateName: <NAME>-
  labels:
    name: jnlp
    label: jnlp
spec:
  securityContext:
    runAsUser: 1000
  containers:
  - name: jnlp
    image: docker.io/jenkins/jnlp-slave
    tty: true
    securityContext:
      runAsUser: 1000
      allowPrivilegeEscalation: false
  - name: <NAME>
    image: <DOCKER_REPO>/<NAME>:<BUILD_ID>
    tty: true
    env:
      - name: JAVA_OPTS
        value: -Dartifact-manager-s3.enabled=true -Djava.awt.headless=true -Djenkins.install.runSetupWizard=false -Djenkins.model.Jenkins.logStartupPerformance=true -Dio.jenkins.plugins.artifact_manager_jclouds.s3.S3BlobStoreConfig.deleteArtifacts=true -Dio.jenkins.plugins.artifact_manager_jclouds.s3.S3BlobStoreConfig.deleteStashes=true -Djava.util.logging.config.file=/var/jenkins_home/log.properties
    securityContext:
      runAsUser: 1000
      allowPrivilegeEscalation: false
  imagePullSecrets:
    - name: <DOCKER_SECRET>
